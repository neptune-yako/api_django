# 接口自动化测试平台初始化数据
# 添加用户admin/123456
INSERT INTO `user` (`id`, `password`, `last_login`, `is_superuser`, `username`, `first_name`, `last_name`, `email`, `is_staff`, `is_active`, `date_joined`, `mobile`, `nickname`, `update_time`) VALUES (100, 'pbkdf2_sha256$870000$eiOmrq3jZ9DkWHw1T7M0C4$UcifOYW+o58jfIVGsk8ihdejjkOaDW35tVTaaS7XZ+I=', '2025-12-08 16:30:00.000000', 1, 'testadmin', '', '', 'test@example.com', 1, 1, '2025-12-08 16:30:00.000000', '13800138000', '测试管理员', '2025-12-08 16:30:00.000000');
# 添加测试项目
INSERT INTO `project` (`id`, `name`, `username`, `create_time`, `update_time`) VALUES (100, 'API自动化测试项目', 'testadmin', '2025-12-08 16:30:00.000000', '2025-12-08 16:30:00.000000');
# 添加测试环境，其中包含了数据库的配置，需要修改成自己的数据库
INSERT INTO `environment` (`id`, `global_variable`, `debug_global_variable`, `db`, `headers`, `global_func`, `name`, `host`, `create_time`, `project_id`, `username`, `update_time`) VALUES (100, '{}', '{\"token\": \"\"}', '[{\"name\": \"testdb\", \"type\": \"mysql\", \"config\": {\"host\": \"127.0.0.1\", \"port\": 3306, \"user\": \"root\", \"database\": \"test\", \"password\": \"123456\"}}]', '{}', '# 全局工具函数，可以在测试用例的前置、断言脚本中直接调用\nimport base64\nimport hashlib\nimport time\n# 生成各种各样的伪数据的库\nfrom faker import Faker\n\n# 实例化，生成中文的随机数\nfk = Faker(locale=\'zh_CN\')\n\n\ndef mobile():\n    \"\"\"随机生成手机号\"\"\"\n    return fk.phone_number()\n\n\ndef name():\n    \"\"\"随机生成中文名字\"\"\"\n    return fk.name()\n\n\ndef address():\n    \"\"\"随机生成一个地址\"\"\"\n    return fk.address()\n\n\ndef city():\n    \"\"\"随机生成一个城市名\"\"\"\n    return fk.city()\n\n\ndef company():\n    \"\"\"随机生成一个公司名\"\"\"\n    return fk.company()\n\n\ndef postcode():\n    \"\"\"随机生成一个邮编\"\"\"\n    return fk.postcode()\n\n\ndef email():\n    \"\"\"随机生成一个邮箱号\"\"\"\n    return fk.email()\n\n\ndef date():\n    \"\"\"随机生成一个日期1987-08-31\"\"\"\n    return fk.date()\n\n\ndef date_time():\n    \"\"\"随机生成一个时间1988-12-11 01:35:30\"\"\"\n    return fk.date_time()\n\n\ndef ipv4():\n    \"\"\"随机生成一个ipv4的地址18.63.34.130\"\"\"\n    return fk.ipv4()\n\n\ndef timestamp():\n    \"\"\"生成当前时间戳1714358666.4879088\"\"\"\n    return time.time()\n\n\ndef md5_encode(args):\n    \"\"\"md5加密，以指定的编码格式编码字符串\"\"\"\n    # 先把变量转成utf-8的编码格式\n    args = str(args).encode(\'utf-8\')\n    # md5加密\n    args_value = hashlib.md5(args).hexdigest()\n    # 返回\n    return args_value\n\n\ndef base64_encode(args):\n    \"\"\"base64编码\"\"\"\n    # 先把变量转成utf-8的编码格式\n    args = str(args).encode(\'utf-8\')\n    # base64加密\n    base64_value = base64.b64encode(args).decode(encoding=\'utf-8\')\n    # 返回\n    return base64_value\n\n\ndef base64_decode(args):\n    \"\"\"base64解密\"\"\"\n    # 原文转为二进制\n    args = str(args).encode(\"utf-8\")\n    # base64解密(二进制)\n    decode_value = base64.b64decode(args)\n    # 转成字符串\n    encode_str = decode_value.decode(\"utf-8\")\n    return encode_str\n\n\ndef sha1_encode(params):\n    \"\"\"参数sha1加密\"\"\"\n    enc_data = hashlib.sha1()\n    enc_data.update(params.encode(encoding=\"utf-8\"))\n    return enc_data.hexdigest()\n\n\ndef sha256_encode(params):\n    \"\"\"参数sha256加密\"\"\"\n    enc_data = hashlib.sha256()\n    enc_data.update(params.encode(encoding=\"utf-8\"))\n    return enc_data.hexdigest()\n\n\ndef sha512_encode(params):\n    \"\"\"参数sha512加密\"\"\"\n    enc_data = hashlib.sha512()\n    enc_data.update(params.encode(encoding=\"utf-8\"))\n    return enc_data.hexdigest()', '测试环境', 'http://httpbin.org', '2025-12-08 16:30:00.000000', 100, 'testadmin', '2025-12-08 16:30:00.000000');
# 添加测试接口
INSERT INTO `interface` (`id`, `name`, `url`, `method`, `create_time`, `project_id`, `username`, `update_time`) VALUES (100, '获取请求信息', '/get', 'GET', '2025-12-08 16:30:00.000000', 100, 'testadmin', '2025-12-08 16:30:00.000000');
INSERT INTO `interface` (`id`, `name`, `url`, `method`, `create_time`, `project_id`, `username`, `update_time`) VALUES (101, 'POST请求测试', '/post', 'POST', '2025-12-08 16:30:00.000000', 100, 'testadmin', '2025-12-08 16:30:00.000000');
INSERT INTO `interface` (`id`, `name`, `url`, `method`, `create_time`, `project_id`, `username`, `update_time`) VALUES (102, 'PUT请求测试', '/put', 'PUT', '2025-12-08 16:30:00.000000', 100, 'testadmin', '2025-12-08 16:30:00.000000');
INSERT INTO `interface` (`id`, `name`, `url`, `method`, `create_time`, `project_id`, `username`, `update_time`) VALUES (103, 'DELETE请求测试', '/delete', 'DELETE', '2025-12-08 16:30:00.000000', 100, 'testadmin', '2025-12-08 16:30:00.000000');
INSERT INTO `interface` (`id`, `name`, `url`, `method`, `create_time`, `project_id`, `username`, `update_time`) VALUES (104, '延迟响应测试', '/delay/2', 'GET', '2025-12-08 16:30:00.000000', 100, 'testadmin', '2025-12-08 16:30:00.000000');
INSERT INTO `interface` (`id`, `name`, `url`, `method`, `create_time`, `project_id`, `username`, `update_time`) VALUES (105, '状态码测试', '/status/200', 'GET', '2025-12-08 16:30:00.000000', 100, 'testadmin', '2025-12-08 16:30:00.000000');
# 添加测试用例
INSERT INTO `case` (`id`, `title`, `headers`, `request`, `file`, `setup_script`, `teardown_script`, `create_time`, `interface_id`, `username`, `update_time`) VALUES (100, '正常GET请求', '{}', '{\"json\": {}, \"params\": {\"name\": \"test\", \"age\": \"18\"}}', '[]', '# 前置脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象', '# 断言脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# response：响应对象response\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象\n\n# http状态码是否为200\ntest.assertion(\"相等\",200,response.status_code)\n\n# 使用jsonpath提取response中的url字段\nurl = test.json_extract(response.json(),\"$..url\")\n\n# 设置临时变量\ntest.save_env_variable(\"url\",url)', '2025-12-08 16:30:00.000000', 100, 'testadmin', '2025-12-08 16:30:00.000000');
INSERT INTO `case` (`id`, `title`, `headers`, `request`, `file`, `setup_script`, `teardown_script`, `create_time`, `interface_id`, `username`, `update_time`) VALUES (101, '正常POST请求', '{\"Content-Type\": \"application/json\"}', '{\"json\": {\"username\": \"testuser\", \"password\": \"123456\"}, \"params\": {}}', '[]', '# 前置脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象\n\n# 调用全局工具函数生成随机用户名\nusername = global_func.name()\n\n# 设置临时变量\ntest.save_env_variable(\"username\",username)', '# 断言脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# response：响应对象response\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象\n\n# http状态码是否为200\ntest.assertion(\"相等\",200,response.status_code)\n\n# 使用jsonpath提取response中的json字段\njson_data = test.json_extract(response.json(),\"$..json\")\nprint(json_data)', '2025-12-08 16:30:00.000000', 101, 'testadmin', '2025-12-08 16:30:00.000000');
INSERT INTO `case` (`id`, `title`, `headers`, `request`, `file`, `setup_script`, `teardown_script`, `create_time`, `interface_id`, `username`, `update_time`) VALUES (102, '正常PUT请求', '{\"Content-Type\": \"application/json\"}', '{\"json\": {\"id\": \"100\", \"name\": \"更新后的名称\"}, \"params\": {}}', '[]', '# 前置脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象', '# 断言脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# response：响应对象response\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象\n\n# http状态码是否为200\ntest.assertion(\"相等\",200,response.status_code)', '2025-12-08 16:30:00.000000', 102, 'testadmin', '2025-12-08 16:30:00.000000');
INSERT INTO `case` (`id`, `title`, `headers`, `request`, `file`, `setup_script`, `teardown_script`, `create_time`, `interface_id`, `username`, `update_time`) VALUES (103, '正常DELETE请求', '{}', '{\"json\": {}, \"params\": {\"id\": \"100\"}}', '[]', '# 前置脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象', '# 断言脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# response：响应对象response\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象\n\n# http状态码是否为200\ntest.assertion(\"相等\",200,response.status_code)', '2025-12-08 16:30:00.000000', 103, 'testadmin', '2025-12-08 16:30:00.000000');
INSERT INTO `case` (`id`, `title`, `headers`, `request`, `file`, `setup_script`, `teardown_script`, `create_time`, `interface_id`, `username`, `update_time`) VALUES (104, '延迟响应测试', '{}', '{\"json\": {}, \"params\": {}}', '[]', '# 前置脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象', '# 断言脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# response：响应对象response\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象\n\n# http状态码是否为200\ntest.assertion(\"相等\",200,response.status_code)', '2025-12-08 16:30:00.000000', 104, 'testadmin', '2025-12-08 16:30:00.000000');
INSERT INTO `case` (`id`, `title`, `headers`, `request`, `file`, `setup_script`, `teardown_script`, `create_time`, `interface_id`, `username`, `update_time`) VALUES (105, '状态码200测试', '{}', '{\"json\": {}, \"params\": {}}', '[]', '# 前置脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象', '# 断言脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# response：响应对象response\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象\n\n# http状态码是否为200\ntest.assertion(\"相等\",200,response.status_code)\n\n# 获取响应体(字符串)\nbody = response.text\n# 包含：预期结果中的内容在实际结果中是否存在\ntest.assertion(\"包含\",\"200\",body)', '2025-12-08 16:30:00.000000', 105, 'testadmin', '2025-12-08 16:30:00.000000');
# 添加测试套件
INSERT INTO `scene` (`id`, `name`, `create_time`, `username`, `project_id`, `update_time`) VALUES (100, 'HTTP接口测试套件', '2025-12-08 16:30:00.000000', 'testadmin', 100, '2025-12-08 16:30:00.000000');
# 添加测试套件下的测试用例
INSERT INTO `step` (`id`, `sort`, `create_time`, `icase_id`, `scene_id`, `update_time`) VALUES (100, 1, '2025-12-08 16:30:00.000000', 100, 100, '2025-12-08 16:30:00.000000');
INSERT INTO `step` (`id`, `sort`, `create_time`, `icase_id`, `scene_id`, `update_time`) VALUES (101, 2, '2025-12-08 16:30:00.000000', 101, 100, '2025-12-08 16:30:00.000000');
INSERT INTO `step` (`id`, `sort`, `create_time`, `icase_id`, `scene_id`, `update_time`) VALUES (102, 3, '2025-12-08 16:30:00.000000', 102, 100, '2025-12-08 16:30:00.000000');
INSERT INTO `step` (`id`, `sort`, `create_time`, `icase_id`, `scene_id`, `update_time`) VALUES (103, 4, '2025-12-08 16:30:00.000000', 103, 100, '2025-12-08 16:30:00.000000');
INSERT INTO `step` (`id`, `sort`, `create_time`, `icase_id`, `scene_id`, `update_time`) VALUES (104, 5, '2025-12-08 16:30:00.000000', 104, 100, '2025-12-08 16:30:00.000000');
INSERT INTO `step` (`id`, `sort`, `create_time`, `icase_id`, `scene_id`, `update_time`) VALUES (105, 6, '2025-12-08 16:30:00.000000', 105, 100, '2025-12-08 16:30:00.000000');
# 添加测试计划
INSERT INTO `plan` (`id`, `name`, `create_time`, `username`, `project_id`, `update_time`) VALUES (100, 'API接口自动化测试计划', '2025-12-08 16:30:00.000000', 'testadmin', 100, '2025-12-08 16:30:00.000000');
# 添加测试计划下的测试套件
INSERT INTO `plan_scene` (`id`, `plan_id`, `scene_id`) VALUES (100, 100, 100);
