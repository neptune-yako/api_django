# 微信公共号
# 添加用户admin/123456
INSERT INTO `user` (`id`, `password`, `last_login`, `is_superuser`, `username`, `first_name`, `last_name`, `email`, `is_staff`, `is_active`, `date_joined`, `mobile`, `nickname`, `update_time`) VALUES (1, 'pbkdf2_sha256$870000$eiOmrq3jZ9DkWHw1T7M0C4$UcifOYW+o58jfIVGsk8ihdejjkOaDW35tVTaaS7XZ+I=', '2024-11-04 16:52:04.563290', 1, 'admin', '', '', '1144961647@qq.com', 1, 1, '2024-11-04 16:49:55.780389', '18326074762', '咸鱼', '2024-11-04 16:49:55.780389');
# 添加测试项目
INSERT INTO `project` (`id`, `name`, `username`, `create_time`, `update_time`) VALUES (1, '微信公共号', 'admin', '2024-08-26 14:48:17.702164', '2024-08-26 14:48:17.702164');
# 添加测试环境，其中包含了数据库的配置，需要修改成自己的数据库
INSERT INTO `environment` (`id`, `global_variable`, `debug_global_variable`, `db`, `headers`, `global_func`, `name`, `host`, `create_time`, `project_id`, `username`, `update_time`) VALUES (1, '{}', '{\"id\": \"\", \"host\": \"https://api.weixin.qq.com\", \"mobile\": \"18733374377\", \"headers\": {}, \"access_token\": \"83_RqKGHdHKNlWxw5yO0UXXmnA1EK0iDNqwwz0tDfWJ3LZYBlbVTRyMm-hg0jETMwxyiB5X4G66oPT7DoUssWzzvT2ByyaYSZDJdcrGIFo4NIaGlCuoU3DcDVPe_XsUJMeABALAD\"}', '[{\"name\": \"aliyun\", \"type\": \"mysql\", \"config\": {\"host\": \"47.121.206.30\", \"port\": 9527, \"user\": \"root\", \"database\": \"django\", \"password\": \"123456\"}}]', '{}', '# 全局工具函数，可以在测试用例的前置、断言脚本中直接调用\nimport base64\nimport hashlib\nimport time\n# 生成各种各样的伪数据的库\nfrom faker import Faker\n\n# 实例化，生成中文的随机数\nfk = Faker(locale=\'zh_CN\')\n\n\ndef mobile():\n    \"\"\"随机生成手机号\"\"\"\n    return fk.phone_number()\n\n\ndef name():\n    \"\"\"随机生成中文名字\"\"\"\n    return fk.name()\n\n\ndef address():\n    \"\"\"随机生成一个地址\"\"\"\n    return fk.address()\n\n\ndef city():\n    \"\"\"随机生成一个城市名\"\"\"\n    return fk.city()\n\n\ndef company():\n    \"\"\"随机生成一个公司名\"\"\"\n    return fk.company()\n\n\ndef postcode():\n    \"\"\"随机生成一个邮编\"\"\"\n    return fk.postcode()\n\n\ndef email():\n    \"\"\"随机生成一个邮箱号\"\"\"\n    return fk.email()\n\n\ndef date():\n    \"\"\"随机生成一个日期1987-08-31\"\"\"\n    return fk.date()\n\n\ndef date_time():\n    \"\"\"随机生成一个时间1988-12-11 01:35:30\"\"\"\n    return fk.date_time()\n\n\ndef ipv4():\n    \"\"\"随机生成一个ipv4的地址18.63.34.130\"\"\"\n    return fk.ipv4()\n\n\ndef timestamp():\n    \"\"\"生成当前时间戳1714358666.4879088\"\"\"\n    return time.time()\n\n\ndef md5_encode(args):\n    \"\"\"md5加密，以指定的编码格式编码字符串\"\"\"\n    # 先把变量转成utf-8的编码格式\n    args = str(args).encode(\'utf-8\')\n    # md5加密\n    args_value = hashlib.md5(args).hexdigest()\n    # 返回\n    return args_value\n\n\ndef base64_encode(args):\n    \"\"\"base64编码\"\"\"\n    # 先把变量转成utf-8的编码格式\n    args = str(args).encode(\'utf-8\')\n    # base64加密\n    base64_value = base64.b64encode(args).decode(encoding=\'utf-8\')\n    # 返回\n    return base64_value\n\n\ndef base64_decode(args):\n    \"\"\"base64解密\"\"\"\n    # 原文转为二进制\n    args = str(args).encode(\"utf-8\")\n    # base64解密(二进制)\n    decode_value = base64.b64decode(args)\n    # 转成字符串\n    encode_str = decode_value.decode(\"utf-8\")\n    return encode_str\n\n\ndef sha1_encode(params):\n    \"\"\"参数sha1加密\"\"\"\n    enc_data = hashlib.sha1()\n    enc_data.update(params.encode(encoding=\"utf-8\"))\n    return enc_data.hexdigest()\n\n\ndef sha256_encode(params):\n    \"\"\"参数sha256加密\"\"\"\n    enc_data = hashlib.sha256()\n    enc_data.update(params.encode(encoding=\"utf-8\"))\n    return enc_data.hexdigest()\n\n\ndef sha512_encode(params):\n    \"\"\"参数sha512加密\"\"\"\n    enc_data = hashlib.sha512()\n    enc_data.update(params.encode(encoding=\"utf-8\"))\n    return enc_data.hexdigest()', '微信公众号', 'https://api.weixin.qq.com', '2024-08-26 14:48:22.989320', 1, 'admin', '2024-08-26 14:48:22.989320');
# 添加测试接口
INSERT INTO `interface` (`id`, `name`, `url`, `method`, `create_time`, `project_id`, `username`, `update_time`) VALUES (1, '获取token', '/cgi-bin/token', 'GET', '2024-08-26 14:50:16.769670', 1, 'admin', '2024-08-26 14:50:16.769670');
INSERT INTO `interface` (`id`, `name`, `url`, `method`, `create_time`, `project_id`, `username`, `update_time`) VALUES (2, '创建标签', '/cgi-bin/tags/create', 'POST', '2024-08-26 14:50:16.769670', 1, 'admin', '2024-08-26 14:50:16.769670');
INSERT INTO `interface` (`id`, `name`, `url`, `method`, `create_time`, `project_id`, `username`, `update_time`) VALUES (3, '编辑标签', '/cgi-bin/tags/update', 'POST', '2024-08-26 14:50:16.769670', 1, 'admin', '2024-08-26 14:50:16.769670');
INSERT INTO `interface` (`id`, `name`, `url`, `method`, `create_time`, `project_id`, `username`, `update_time`) VALUES (4, '查询标签', '/cgi-bin/tags/get', 'GET', '2024-08-26 14:50:16.769670', 1, 'admin', '2024-08-26 14:50:16.769670');
INSERT INTO `interface` (`id`, `name`, `url`, `method`, `create_time`, `project_id`, `username`, `update_time`) VALUES (5, '文件上传', '/cgi-bin/media/uploadimg', 'POST', '2024-08-26 14:50:16.769670', 1, 'admin', '2024-08-26 14:50:16.769670');
INSERT INTO `interface` (`id`, `name`, `url`, `method`, `create_time`, `project_id`, `username`, `update_time`) VALUES (6, '删除标签', '/cgi-bin/tags/delete', 'POST', '2024-08-26 14:50:16.769670', 1, 'admin', '2024-08-26 14:50:16.769670');
# 添加测试用例
INSERT INTO `case` (`id`, `title`, `headers`, `request`, `file`, `setup_script`, `teardown_script`, `create_time`, `interface_id`, `username`, `update_time`) VALUES (1, '正常获取', '{}', '{\"json\": {}, \"params\": {\"appid\": \"wx8cbefbfc3b8c2f3b\", \"secret\": \"4fa4582bf6b362742f079a3b7709ccad\", \"grant_type\": \"client_credential\"}}', '[]', '# 前置脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象', '# 断言脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# response：响应对象response\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象\n\n# http状态码是否为200\ntest.assertion(\"相等\",200,response.status_code)\n\n# 使用jsonpath提取response中的access_token字段\naccess_token = test.json_extract(response.json(),\"$..access_token\")\n\n# 设置临时变量\ntest.save_env_variable(\"access_token\",access_token)\n\n # 执行sql语句，格式：db.连接名.execute_all(sql语句)\nsql = \"SELECT email FROM user where username=\'admin\';\"\nres = db.aliyun.execute_all(sql)\nprint(res)', '2024-08-26 14:51:42.357982', 1, 'admin', '2024-08-26 14:50:16.769670');
INSERT INTO `case` (`id`, `title`, `headers`, `request`, `file`, `setup_script`, `teardown_script`, `create_time`, `interface_id`, `username`, `update_time`) VALUES (2, '正常创建', '{}', '{\"json\": {\"tag\": {\"name\": \"裴育${{mobile}}\"}}, \"params\": {\"access_token\": \"${{access_token}}\"}}', '[]', '# 前置脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象\n\n# 调用全局工具函数mobile随机生成一个手机号码\nmobile = global_func.mobile()\n\n# 设置临时变量\ntest.save_env_variable(\"mobile\",mobile)', '# 断言脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# response：响应对象response\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象\n\n# http状态码是否为200\ntest.assertion(\"相等\",200,response.status_code)\n\n# 使用jsonpath提取response中的id字段\nid = test.json_extract(response.json(),\"$..id\")\n\n# 设置临时变量\ntest.save_env_variable(\"id\",id)', '2024-08-26 14:59:56.070621', 2, 'admin', '2024-08-26 14:50:16.769670');
INSERT INTO `case` (`id`, `title`, `headers`, `request`, `file`, `setup_script`, `teardown_script`, `create_time`, `interface_id`, `username`, `update_time`) VALUES (3, '正常编辑', '{}', '{\"json\": {\"tag\": {\"id\": \"${{id}}\", \"name\": \"测试\"}}, \"params\": {\"access_token\": \"${{access_token}}\"}}', '[]', '# 前置脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象', '# 断言脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# response：响应对象response\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象\n\n# http状态码是否为200\ntest.assertion(\"相等\",200,response.status_code)', '2024-08-26 15:04:53.889790', 3, 'admin', '2024-08-26 14:50:16.769670');
INSERT INTO `case` (`id`, `title`, `headers`, `request`, `file`, `setup_script`, `teardown_script`, `create_time`, `interface_id`, `username`, `update_time`) VALUES (4, '正常查询', '{}', '{\"json\": {}, \"params\": {\"access_token\": \"${{access_token}}\"}}', '[]', '# 前置脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象', '# 断言脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# response：响应对象response\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象\n\n# http状态码是否为200\ntest.assertion(\"相等\",200,response.status_code)', '2024-08-26 15:06:16.083873', 4, 'admin', '2024-08-26 14:50:16.769670');
INSERT INTO `case` (`id`, `title`, `headers`, `request`, `file`, `setup_script`, `teardown_script`, `create_time`, `interface_id`, `username`, `update_time`) VALUES (5, '正常上传', '{\"Content-type\": \"multipart/form-data\"}', '{\"params\": {\"access_token\": \"${{access_token}}\"}}', '[[\"media\", [\"add.png\", \"files/add.png\", \"image/png\"]]]', '# 前置脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象', '# 断言脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# response：响应对象response\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象\n\n# http状态码是否为200\ntest.assertion(\"相等\",200,response.status_code)\n\n# 获取响应体(字符串)\nbody = response.text\n# 包含：预期结果中的内容在实际结果中url是否存在\ntest.assertion(\"包含\",\"url\",body)', '2024-08-26 15:07:19.417897', 5, 'admin', '2024-08-26 14:50:16.769670');
INSERT INTO `case` (`id`, `title`, `headers`, `request`, `file`, `setup_script`, `teardown_script`, `create_time`, `interface_id`, `username`, `update_time`) VALUES (6, '正常删除', '{}', '{\"json\": {\"tag\": {\"id\": \"${{id}}\"}}, \"params\": {\"access_token\": \"${{access_token}}\"}}', '[]', '# 前置脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象', '# 断言脚本(python)\n# global_func：全局工具函数\n# data：用例数据\n# response：响应对象response\n# env：临时环境\n# ENV：全局环境\n# db：数据库操作对象\n\n# http状态码是否为200\ntest.assertion(\"相等\",200,response.status_code)', '2024-08-26 15:09:18.246359', 6, 'admin', '2024-08-26 14:50:16.769670');
# 添加测试套件
INSERT INTO `scene` (`id`, `name`, `create_time`, `username`, `project_id`, `update_time`) VALUES (1, '测试套件', '2025-05-09 09:40:41.228138', 'admin', 1, '2025-05-09 09:40:41.228138');
# 添加测试套件下的测试用例
INSERT INTO `step` (`id`, `sort`, `create_time`, `icase_id`, `scene_id`, `update_time`) VALUES (1, 1, '2025-05-09 09:40:55.180386', 1, 1, '2025-05-09 09:40:41.228138');
INSERT INTO `step` (`id`, `sort`, `create_time`, `icase_id`, `scene_id`, `update_time`) VALUES (2, 2, '2025-05-09 09:40:55.376767', 2, 1, '2025-05-09 09:40:41.228138');
INSERT INTO `step` (`id`, `sort`, `create_time`, `icase_id`, `scene_id`, `update_time`) VALUES (3, 3, '2025-05-09 09:40:55.553023', 3, 1, '2025-05-09 09:40:41.228138');
INSERT INTO `step` (`id`, `sort`, `create_time`, `icase_id`, `scene_id`, `update_time`) VALUES (4, 4, '2025-05-09 09:40:55.765399', 4, 1, '2025-05-09 09:40:41.228138');
INSERT INTO `step` (`id`, `sort`, `create_time`, `icase_id`, `scene_id`, `update_time`) VALUES (5, 5, '2025-05-09 09:40:55.947841', 5, 1, '2025-05-09 09:40:41.228138');
INSERT INTO `step` (`id`, `sort`, `create_time`, `icase_id`, `scene_id`, `update_time`) VALUES (6, 6, '2025-05-09 09:40:56.129446', 6, 1, '2025-05-09 09:40:41.228138');
# 添加测试计划
INSERT INTO `plan` (`id`, `name`, `create_time`, `username`, `project_id`, `update_time`) VALUES (1, '测试计划', '2025-05-09 10:58:25.211988', 'admin', 1, '2025-05-09 10:58:25.211988');
# 添加测试计划下的测试套件
INSERT INTO `plan_scene` (`id`, `plan_id`, `scene_id`) VALUES (1, 1, 1);
