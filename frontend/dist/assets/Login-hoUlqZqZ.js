import{v as w,a as y,e as $,o as A,D as E,U as o,F as a,M as l,u as c,ao as r,aE as L,E as k,ak as b,L as B,Q as D,R as g}from"./vue-CXALzJrr.js";import{U as N,h as K,E as x}from"./index-Bqsb1G-Q.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q="/assets/logo-SDYLSbgd.png",H={class:"mian"},P={class:"login_box"},Q={class:"login-form"},T={__name:"Login",setup(Y){const t=w({username:"",password:"",status:!0}),m=y(!1),_=L(),i=N();function f(d){d.validate(async function(e){if(!e)return;const n=await K.userApi.login(t);n.status===200?(x({title:"登录成功！",message:"欢迎登录接口自动化测试平台！",type:"success",duration:1500}),i.userInfo=n.data,t.status?(i.isAuthenticated=!0,localStorage.setItem("remember","true"),localStorage.setItem("username",t.username),localStorage.setItem("password",t.password)):(i.isAuthenticated=!0,localStorage.removeItem("remember"),localStorage.removeItem("username"),localStorage.removeItem("password")),await _.push({name:"project"})):x({title:"登录失败",message:n.data.detail[0],type:"error",duration:1500})})}const S=w({username:[{required:!0,message:"账号不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]}),u=y();function V(d){d&&d.resetFields()}const C=$(()=>!(t.username!==""&&t.password!==""));return A(()=>{localStorage.getItem("remember")==="true"&&(t.username=localStorage.getItem("username")||"",t.password=localStorage.getItem("password")||"",t.status=!0)}),(d,e)=>{const n=r("el-button"),I=r("el-tooltip"),v=r("el-input"),p=r("el-form-item"),R=r("el-icon"),U=r("el-switch"),F=r("el-link"),M=r("el-form");return k(),E("div",H,[o(I,{content:c(i).darkMode?"切换到浅色模式":"切换到暗黑模式",placement:"bottom"},{default:l(()=>[o(n,{circle:"",onClick:c(i).toggleDarkMode,icon:c(i).darkMode?"Moon":"Sunny",class:"dark-toggle",style:{position:"absolute",top:"40px",right:"40px"}},null,8,["onClick","icon"])]),_:1},8,["content"]),a("div",P,[e[12]||(e[12]=a("div",{class:"head"},[a("img",{src:q,class:"logo",alt:""}),a("div",{class:"title"},"登录接口测试平台")],-1)),a("div",Q,[o(M,{model:t,rules:S,ref_key:"loginFormRef",ref:u},{default:l(()=>[o(p,{prop:"username",style:{width:"400px"},onKeyup:e[1]||(e[1]=b(s=>f(u.value),["enter"]))},{default:l(()=>[o(v,{"prefix-icon":"UserFilled",modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=s=>t.username=s),autocomplete:"off",placeholder:"请输入账号、手机号、邮箱",clearable:""},null,8,["modelValue"])]),_:1}),o(p,{prop:"password",style:{width:"400px"},onKeyup:e[4]||(e[4]=b(s=>f(u.value),["enter"]))},{default:l(()=>[o(v,{"prefix-icon":"Lock",type:m.value?"text":"password",modelValue:t.password,"onUpdate:modelValue":e[3]||(e[3]=s=>t.password=s),autocomplete:"off",placeholder:"请输入密码",clearable:""},{suffix:l(()=>[o(R,{onClick:e[2]||(e[2]=s=>m.value=!m.value),style:{cursor:"pointer"}},{default:l(()=>[(k(),B(D(m.value?"View":"Hide")))]),_:1})]),_:1},8,["type","modelValue"])]),_:1}),o(p,null,{default:l(()=>[o(U,{modelValue:t.status,"onUpdate:modelValue":e[5]||(e[5]=s=>t.status=s),"inactive-text":"记住"},null,8,["modelValue"])]),_:1}),o(p,null,{default:l(()=>[o(n,{onClick:e[6]||(e[6]=s=>V(u.value)),icon:"CircleClose",style:{width:"193px"}},{default:l(()=>[...e[9]||(e[9]=[g("重 置",-1)])]),_:1}),o(n,{disabled:C.value,type:"primary",onClick:e[7]||(e[7]=s=>f(u.value)),style:{width:"193px"},icon:"Avatar"},{default:l(()=>[...e[10]||(e[10]=[g("登 录 ",-1)])]),_:1},8,["disabled"])]),_:1}),o(F,{type:"primary",onClick:e[8]||(e[8]=s=>c(_).push("/register"))},{default:l(()=>[...e[11]||(e[11]=[g("没有账号？点击注册",-1)])]),_:1})]),_:1},8,["model","rules"])])]),e[13]||(e[13]=a("div",{class:"login-footer"},[a("div",{class:"login-footer__content"},[a("span",null,"© 2024-2025 接口测试平台. All Rights Reserved."),a("a",{href:"https://gitee.com/pytests/api_django",class:"slide",target:"_blank"},"源码下载")])],-1))])}}},O=j(T,[["__scopeId","data-v-abfe1471"]]);export{O as default};
