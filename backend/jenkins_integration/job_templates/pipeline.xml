<?xml version='1.1' encoding='UTF-8'?>
<flow-definition plugin="workflow-job@2.40">
  <actions/>
  <description>Pipeline 流水线任务</description>
  <keepDependencies>false</keepDependencies>
  <properties/>
  <definition class="org.jenkinsci.plugins.workflow.cps.CpsFlowDefinition" plugin="workflow-cps@2.90">
    <script>pipeline {
    agent any
    
    stages {
        stage('准备环境') {
            steps {
                echo '======================================'
                echo '准备测试环境'
                echo '======================================'
                // 在这里添加环境准备命令
                // sh 'pip install -r requirements.txt'
            }
        }
        
        stage('执行测试') {
            steps {
                echo '======================================'
                echo '开始执行测试用例'
                echo '======================================'
                // 在这里添加测试命令
                // sh 'pytest tests/ --alluredir=allure-results -v'
                
                // 模拟测试执行
                sh '''
                    echo "Running tests..."
                    sleep 2
                    echo "Tests completed successfully!"
                '''
            }
        }
        
        stage('生成报告') {
            steps {
                echo '======================================'
                echo '生成测试报告'
                echo '======================================'
                // 在这里添加报告生成命令
                // allure includeProperties: false, jdk: '', results: [[path: 'allure-results']]
            }
        }
    }
    
    post {
        always {
            echo '======================================'
            echo 'Pipeline 执行完成'
            echo '======================================'
        }
        success {
            echo '✓ 测试成功'
        }
        failure {
            echo '✗ 测试失败'
        }
    }
}
</script>
    <sandbox>true</sandbox>
  </definition>
  <triggers/>
  <disabled>false</disabled>
</flow-definition>
